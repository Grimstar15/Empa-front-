{"ast":null,"code":"import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import grapesjs from\"grapesjs\";import gjsPresetWebpage from\"grapesjs-preset-webpage\";import\"grapesjs/dist/css/grapes.min.css\";import\"./grapes.scss\";import{useParams}from\"react-router-dom\";import{API_HOST,assest_upload}from\"../../api_utils\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Page=function Page(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editor=_useState2[0],seteditor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),asset=_useState4[0],setAsset=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),jdata=_useState6[0],setJdata=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useParams=useParams(),pageId=_useParams.pageId;// useEffect(() => {\n//   const editor = grapesjs.init({\n//     container: \"#editor\",\n//     assetManager: {\n//       assets: [\n//         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\n//         // Pass an object with your properties\n//         {\n//           type: \"image\",\n//           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\n//           height: 350,\n//           width: 250,\n//           name: \"displayName\",\n//         },\n//         {\n//           // As the 'image' is the base type of assets, omitting it will\n//           // be set as `image` by default\n//           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\n//           height: 350,\n//           width: 250,\n//           name: \"displayName\",\n//         },\n//       ],\n//     },\n//   });\n//   seteditor({ ...editor, editor });\n// }, [data]);\nuseEffect(function(){var editor=grapesjs.init({container:\"#editor\",storageManager:{type:\"remote\",contentTypeJson:true,storeComponents:true,storeStyles:true,storeHtml:true,storeCss:true,headers:{\"Content-Type\":\"application/json\"},id:pageId,urlStore:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\"),urlLoad:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\")},assetManager:{// Default assets\n// Style prefix\nstylePrefix:\"am-\",assets:data,// Url where uploads will be send, set false to disable upload\n// upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\n// Text on upload input\nuploadText:\"Drop files here or click to sadsd\",// Label for the add button\naddBtnText:\"Add image\",// Custom uploadFile function\n// @example\nuploadFile:function uploadFile(e){var files=e.dataTransfer?e.dataTransfer.files:e.target.files;// ...send somewhere\nconsole.log(files);var formData=new FormData();for(var i in files){formData.append(\"file\",files[i]);}axios.post(\"\".concat(API_HOST,\"/asset\"),formData).then(function(response){setData(response.data);}).catch(function(error){console.log(\"Eeee\",error.message);});}//  uploadFile: '',\n},plugins:[gjsPresetWebpage],plugins0pts:{gjsPresetWebpage:{}}});seteditor(editor);},[data]);return/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsx(\"div\",{id:\"editor\"})});};export default Page;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Editor/index.js"],"names":["React","useState","useEffect","grapesjs","gjsPresetWebpage","useParams","API_HOST","assest_upload","axios","Page","editor","seteditor","asset","setAsset","jdata","setJdata","data","setData","pageId","init","container","storageManager","type","contentTypeJson","storeComponents","storeStyles","storeHtml","storeCss","headers","id","urlStore","urlLoad","assetManager","stylePrefix","assets","uploadText","addBtnText","uploadFile","e","files","dataTransfer","target","console","log","formData","FormData","i","append","post","then","response","catch","error","message","plugins","plugins0pts"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport grapesjs from \"grapesjs\";\r\nimport gjsPresetWebpage from \"grapesjs-preset-webpage\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport \"./grapes.scss\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { API_HOST, assest_upload } from \"../../api_utils\";\r\nimport axios from \"axios\";\r\nconst Page = () => {\r\n  const [editor, seteditor] = useState(null);\r\n  const [asset, setAsset] = useState([]);\r\n  const [jdata, setJdata] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const { pageId } = useParams();\r\n  // useEffect(() => {\r\n  //   const editor = grapesjs.init({\r\n  //     container: \"#editor\",\r\n  //     assetManager: {\r\n  //       assets: [\r\n  //         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\r\n  //         // Pass an object with your properties\r\n  //         {\r\n  //           type: \"image\",\r\n  //           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //         {\r\n  //           // As the 'image' is the base type of assets, omitting it will\r\n  //           // be set as `image` by default\r\n  //           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //       ],\r\n  //     },\r\n  //   });\r\n  //   seteditor({ ...editor, editor });\r\n  // }, [data]);\r\n  useEffect(() => {\r\n    const editor = grapesjs.init({\r\n      container: \"#editor\",\r\n\r\n      storageManager: {\r\n        type: \"remote\",\r\n        contentTypeJson: true,\r\n        storeComponents: true,\r\n        storeStyles: true,\r\n        storeHtml: true,\r\n        storeCss: true,\r\n\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        id: pageId,\r\n        urlStore: `${API_HOST}/edit/${pageId}/content`,\r\n        urlLoad: `${API_HOST}/edit/${pageId}/content`,\r\n      },\r\n      assetManager: {\r\n        // Default assets\r\n\r\n        // Style prefix\r\n        stylePrefix: \"am-\",\r\n        assets: data,\r\n        // Url where uploads will be send, set false to disable upload\r\n        // upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\r\n\r\n        // Text on upload input\r\n        uploadText: \"Drop files here or click to sadsd\",\r\n\r\n        // Label for the add button\r\n        addBtnText: \"Add image\",\r\n\r\n        // Custom uploadFile function\r\n        // @example\r\n        uploadFile: function (e) {\r\n          var files = e.dataTransfer ? e.dataTransfer.files : e.target.files;\r\n          // ...send somewhere\r\n          console.log(files);\r\n\r\n          var formData = new FormData();\r\n\r\n          for (var i in files) {\r\n            formData.append(\"file\", files[i]);\r\n          }\r\n\r\n          axios\r\n            .post(`${API_HOST}/asset`, formData)\r\n            .then((response) => {\r\n              setData(response.data);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Eeee\", error.message);\r\n            });\r\n        },\r\n\r\n        //  uploadFile: '',\r\n      },\r\n      plugins: [gjsPresetWebpage],\r\n      plugins0pts: {\r\n        gjsPresetWebpage: {},\r\n      },\r\n    });\r\n    seteditor(editor);\r\n  }, [data]);\r\n  return (\r\n    <div className=\"Container\">\r\n      <div id=\"editor\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"]},"metadata":{},"sourceType":"module"}