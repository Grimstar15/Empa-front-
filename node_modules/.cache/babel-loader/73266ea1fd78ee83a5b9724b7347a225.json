{"ast":null,"code":"import _objectSpread from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"bootstrap\";import{Table,FormGroup,Form}from\"react-bootstrap\";import\"./Admin.scss\";import axios from\"axios\";import{API_HOST,create_training}from\"../../api_utils\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState({category_id:null,title:null,price:null,training_language:null,capacity:null}),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isValid=_useState8[0],setIsValid=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pages=_useState10[0],setPages=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var upload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(body){var newPage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return create_training(body);case 2:newPage=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function upload(_x){return _ref.apply(this,arguments);};}();var handldeSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(name){_context2.next=3;break;}setIsValid(false);return _context2.abrupt(\"return\");case 3:console.log(body);// const newPage = await create_training(body);\n// body.forEach((item, index) => {\n//   upload(item);\n// });\n//  body.map((el) => upload(el));\n// const newPage = await create_page(body);\n//   setName(\"\");\n//  setPages([...pages, newPage]);\ncase 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handldeSubmit(){return _ref2.apply(this,arguments);};}();var handle=function handle(e){var newbody=_objectSpread({},body);if(e.target.id===\"image\"){var _image=e.target.files[0];setImage(_image);console.log(\"kkk\",_image);}else{newbody[e.target.id]=e.target.value;setBody(newbody);}console.log(body);};var getimage=function getimage(e){var files=e.target.files;var data=new FormData();data.append(\"file\",files[0]);console.log(e.target.files);};var submit=function submit(e){e.preventDefault();var data=new FormData();data.append(\"file\",image);data.append(\"category_id\",body.category_id);data.append(\"title\",body.title);data.append(\"price\",body.price);data.append(\"training_language\",body.training_language);data.append(\"capacity\",body.capacity);create_training(data);};useEffect(function(){function getAllPages(){return _getAllPages.apply(this,arguments);}function _getAllPages(){_getAllPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,_category;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"\".concat(API_HOST,\"/training\"));case 3:response=_context3.sent;_context3.next=6;return axios.get(\"\".concat(API_HOST,\"/training_category\"));case 6:_category=_context3.sent;setPages(response.data);setCategory(_category.data);console.log(response.data);_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(\"error :>>\",_context3.t0);setError(_context3.t0.message);case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return _getAllPages.apply(this,arguments);}getAllPages();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mt-5\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"create-page\",onSubmit:function onSubmit(e){return submit(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"modal-tittle\",id:\"addPageModalLabel\",Create:true,Page:true,children:\"Create page\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlSelect1\",className:\"form-label\",children:\"Category \\u0441\\u043E\\u043D\\u0433\\u043E\\u0445\"}),/*#__PURE__*/_jsx(\"select\",{id:\"category_id\",class:\"form-control form-control-sm\",value:body.category_id,onChange:function onChange(e){return handle(e);},children:category?category.map(function(item){return/*#__PURE__*/_jsx(\"option\",{children:item.title});}):\"No category\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm \".concat(isValid?\"\":\"is-invalid\"),id:\"title\",name:\"title\",placeholder:\"Title of Page\",value:body.title,onChange:function onChange(e){return handle(e);}}),!isValid&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"\\u041D\\u044D\\u0440\\u044D\\u044D \\u043E\\u0440\\u0443\\u0443\\u043B\\u043D\\u0430 \\u0443\\u0443!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInput\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",class:\"form-control\",id:\"price\",placeholder:\"Price\",value:body.price,onChange:function onChange(e){return handle(e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlSelect1\",className:\"form-label\",children:\"\\u0425\\u044D\\u043B\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"training_language\",class:\"form-control form-control-sm\",value:body.training_language,onChange:function onChange(e){return handle(e);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"\\u041C\\u043E\\u043D\\u0433\\u043E\\u043B\"}),/*#__PURE__*/_jsx(\"option\",{children:\"\\u0410\\u043D\\u0433\\u043B\\u0438\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInput\",children:\"\\u0425\\u04AF\\u043D\\u0438\\u0439 \\u0442\\u043E\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{value:body.capacity,id:\"capacity\",onChange:function onChange(e){return handle(e);},type:\"number\",class:\"form-control\",placeholder:\"\\u0425\\u04AF\\u043D\\u0438\\u0439 \\u0442\\u043E\\u043E\"})]}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{id:\"image\",onChange:function onChange(e){return handle(e);},type:\"file\",name:\"file\",class:\"form-control-file\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary btn-sm\",onClick:\"clearForm()\",children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-sm\",onClick:submit,children:\"Submit\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 my-2\",children:[error&&/*#__PURE__*/_jsx(\"div\",{role:\"alert\",className:\"alert alert-primary\",children:error}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Slug\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:pages?pages.map(function(page){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:page.id}),/*#__PURE__*/_jsx(\"td\",{children:page.title}),/*#__PURE__*/_jsx(\"td\",{children:page.price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/editor/\".concat(page.id),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{children:\"Delete\"})})]},page.id);}):\"No page\"})]})]})]});};export default Admin;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Admin/index.js"],"names":["React","useState","useEffect","Table","FormGroup","Form","axios","API_HOST","create_training","Link","Admin","name","setName","category_id","title","price","training_language","capacity","body","setBody","image","setImage","isValid","setIsValid","pages","setPages","error","setError","category","setCategory","upload","newPage","handldeSubmit","console","log","handle","e","newbody","target","id","files","value","getimage","data","FormData","append","submit","preventDefault","getAllPages","get","response","message","map","item","page"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"bootstrap\";\r\nimport { Table, FormGroup, Form } from \"react-bootstrap\";\r\n\r\nimport \"./Admin.scss\";\r\nimport axios from \"axios\";\r\nimport { API_HOST, create_training } from \"../../api_utils\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Admin = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [body, setBody] = useState({\r\n    category_id: null,\r\n    title: null,\r\n    price: null,\r\n    training_language: null,\r\n    capacity: null,\r\n  });\r\n  const [image, setImage] = useState();\r\n  const [isValid, setIsValid] = useState(true);\r\n  const [pages, setPages] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [category, setCategory] = useState([]);\r\n  const upload = async (body) => {\r\n    const newPage = await create_training(body);\r\n  };\r\n  const handldeSubmit = async () => {\r\n    if (!name) {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n    console.log(body);\r\n    // const newPage = await create_training(body);\r\n    // body.forEach((item, index) => {\r\n    //   upload(item);\r\n    // });\r\n    //  body.map((el) => upload(el));\r\n    // const newPage = await create_page(body);\r\n    //   setName(\"\");\r\n    //  setPages([...pages, newPage]);\r\n  };\r\n\r\n  const handle = (e) => {\r\n    const newbody = { ...body };\r\n\r\n    if (e.target.id === \"image\") {\r\n      const image = e.target.files[0];\r\n\r\n      setImage(image);\r\n      console.log(\"kkk\", image);\r\n    } else {\r\n      newbody[e.target.id] = e.target.value;\r\n      setBody(newbody);\r\n    }\r\n\r\n    console.log(body);\r\n  };\r\n  const getimage = (e) => {\r\n    const files = e.target.files;\r\n    const data = new FormData();\r\n    data.append(\"file\", files[0]);\r\n    console.log(e.target.files);\r\n  };\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"file\", image);\r\n    data.append(\"category_id\", body.category_id);\r\n    data.append(\"title\", body.title);\r\n    data.append(\"price\", body.price);\r\n    data.append(\"training_language\", body.training_language);\r\n    data.append(\"capacity\", body.capacity);\r\n\r\n    create_training(data);\r\n  };\r\n  useEffect(() => {\r\n    async function getAllPages() {\r\n      try {\r\n        const response = await axios.get(`${API_HOST}/training`);\r\n        const category = await axios.get(`${API_HOST}/training_category`);\r\n        setPages(response.data);\r\n        setCategory(category.data);\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.log(\"error :>>\", error);\r\n        setError(error.message);\r\n      }\r\n    }\r\n    getAllPages();\r\n  }, []);\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"col-12 mt-5\">\r\n        <form id=\"create-page\" onSubmit={(e) => submit(e)}>\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-tittle\" id=\"addPageModalLabel\" Create Page>\r\n              Create page\r\n            </h5>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"col-auto\">\r\n              <div className=\"form-group\">\r\n                <label for=\"exampleFormControlSelect1\" className=\"form-label\">\r\n                  Category сонгох\r\n                </label>\r\n                <select\r\n                  id=\"category_id\"\r\n                  class=\"form-control form-control-sm\"\r\n                  value={body.category_id}\r\n                  onChange={(e) => handle(e)}\r\n                >\r\n                  {category\r\n                    ? category.map((item) => <option>{item.title}</option>)\r\n                    : \"No category\"}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\" className=\"form-label\">\r\n                  Title\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`form-control form-control-sm ${\r\n                    isValid ? \"\" : \"is-invalid\"\r\n                  }`}\r\n                  id=\"title\"\r\n                  name=\"title\"\r\n                  placeholder=\"Title of Page\"\r\n                  value={body.title}\r\n                  onChange={(e) => handle(e)}\r\n                />\r\n                {!isValid && (\r\n                  <div className=\"invalid-feedback\">Нэрээ оруулна уу!</div>\r\n                )}\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label for=\"exampleInput\">Price</label>\r\n                <input\r\n                  type=\"number\"\r\n                  class=\"form-control\"\r\n                  id=\"price\"\r\n                  placeholder=\"Price\"\r\n                  value={body.price}\r\n                  onChange={(e) => handle(e)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label for=\"exampleFormControlSelect1\" className=\"form-label\">\r\n                  Хэл\r\n                </label>\r\n                <select\r\n                  id=\"training_language\"\r\n                  class=\"form-control form-control-sm\"\r\n                  value={body.training_language}\r\n                  onChange={(e) => handle(e)}\r\n                >\r\n                  <option>Монгол</option>\r\n                  <option>Англи</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label for=\"exampleInput\">Хүний тоо</label>\r\n                <input\r\n                  value={body.capacity}\r\n                  id=\"capacity\"\r\n                  onChange={(e) => handle(e)}\r\n                  type=\"number\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Хүний тоо\"\r\n                />\r\n              </div>\r\n              <form>\r\n                <div class=\"form-group\">\r\n                  <input\r\n                    id=\"image\"\r\n                    onChange={(e) => handle(e)}\r\n                    type=\"file\"\r\n                    name=\"file\"\r\n                    class=\"form-control-file\"\r\n                  />\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary btn-sm\"\r\n              onClick=\"clearForm()\"\r\n            >\r\n              Clear\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary btn-sm\"\r\n              onClick={submit}\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div className=\"col-12 my-2\">\r\n        {error && (\r\n          <div role=\"alert\" className=\"alert alert-primary\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <td>ID</td>\r\n              <td>Name</td>\r\n              <td>Slug</td>\r\n              <td colSpan=\"2\">Action</td>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {pages\r\n              ? pages.map((page) => (\r\n                  <tr key={page.id}>\r\n                    <td>{page.id}</td>\r\n                    <td>{page.title}</td>\r\n                    <td>{page.price}</td>\r\n                    <td>\r\n                      <Link to={`/editor/${page.id}`}>Edit</Link>\r\n                    </td>\r\n                    <td>\r\n                      <button>Delete</button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              : \"No page\"}\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}