{"ast":null,"code":"import _regeneratorRuntime from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import grapesjs from\"grapesjs\";import gjsBlockBasic from\"grapesjs-blocks-basic\";import\"grapesjs/dist/css/grapes.min.css\";import\"./grapes.scss\";import{Link,useParams}from\"react-router-dom\";import{API_HOST,get_page}from\"../../api_utils\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Page=function Page(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editor=_useState2[0],seteditor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataa=_useState4[0],setDataa=_useState4[1];var _useParams=useParams(),pageId=_useParams.pageId;console.log(\"pageId :>>\",pageId);var loadd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return get_page(pageId);case 2:data=_context.sent;setDataa([].concat(_toConsumableArray(dataa),[data]));console.log(dataa);case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadd(){return _ref.apply(this,arguments);};}();useEffect(function(){var editor=grapesjs.init({container:\"#editor\",blockManager:{appendTo:\"#blocks\"},styleManager:{appendTo:\"#styles-container\",sectors:[{name:\"Dimension\",open:false,buildProps:[\"width\",\"min-height\",\"padding\"],properties:[{type:\"integer\",name:\"The width\",property:\"width\",units:[\"px\",\"%\"],defaults:\"auto\",min:0}]},{name:\"Extra\",buildProps:[\"background-color\",\"box-shadow\"]}]},layerManager:{appendTo:\"#layers-container\"},traitManager:{appendTo:\"#trait-container\"},selectorManager:{appendTo:\"#styles-container\"},panels:{defaults:[{id:\"basic-actions\",el:\".panel__basic-actions\",buttons:[{id:\"visibility\",active:true,// active by default\nclassName:\"btn-toggle-borders\",label:'<i class=\"fa fa-clone\"></i>',command:\"sw-visibility\"// Built-in command\n},{id:\"preview\",togglable:false,className:\"btn-toggle-borders\",label:'<i class=\"fa fa-eye\"></i>',command:\"cmd-preview\"// Built-in command\n},{id:\"command\",togglable:false,className:\"btn-toggle-borders\",label:'<i class=\"fa fa-code\"></i>',command:\"show-document-log\"// Built-in command\n}]},{id:\"panel-devices\",el:\".panel__devices\",buttons:[{id:\"device-desktop\",label:'<i class=\"fa fa-television\"></i>',command:\"set-device-desktop\",active:true,togglable:false},{id:\"device-mobile\",label:'<i class=\"fa fa-mobile\"></i>',command:\"set-device-mobile\",togglable:false}]}]},deviceManager:{devices:[{name:\"Desktop\",width:\"\"},{name:\"Mobile\",width:\"320px\",widthMedia:\"480px\"}]},assetManager:{embedAsBase64:false},storageManager:{type:\"remote\",stepsBeforeSave:3,contentTypeJson:true,storeComponents:true,storeStyles:true,storeHtml:true,storeCss:true,headers:{\"Content-Type\":\"application/json\"},id:pageId,urlStore:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\"),urlLoad:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\")},// storageManager: {\n//   id: pageId, // Prefix identifier that will be used on parameters\n//   type: \"local\", // Type of the storage\n//   autosave: true, // Store data automatically\n//   autoload: true, // Autoload stored data on init\n//   stepsBeforeSave: 1, // If autosave enabled, indicates how many changes are necessary before store method is triggered\n// },\nplugins:[gjsBlockBasic],plugins0pts:{gjsBlockBasic:{}}});// Commands\neditor.Commands.add(\"set-device-desktop\",{run:function run(editor){return editor.setDevice(\"Desktop\");}});editor.Commands.add(\"set-device-mobile\",{run:function run(editor){return editor.setDevice(\"Mobile\");}});editor.Commands.add(\"show-document-log\",{run:function run(editor){var a=editor.Canvas;loadd();console.log(editor.Canvas.getDocument());console.log(editor.getHtml());console.log(editor.getCss());}});editor.Commands.add(\"cmd-preview\",{run:function run(editor){editor.store();var win=window.open(\"/page/\".concat(pageId),\"_blank\");win.focus();}});seteditor(editor);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Containerr\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"navbar\",className:\"sidenav d-flex flex-column overflow-scroll\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-brand mb-0 h3 logo\",children:\"Editor\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs\",id:\"myTab\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link active\",id:\"block-tab\",\"data-bs-toggle\":\"tab\",\"data-bs-target\":\"#block\",type:\"button\",role:\"tab\",\"aria-controls\":\"block\",\"aria-selected\":\"true\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-cubes\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link\",id:\"layer-tab\",\"data-bs-toggle\":\"tab\",\"data-bs-target\":\"#layer\",type:\"button\",role:\"tab\",\"aria-controls\":\"layer\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-tasks\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link\",id:\"style-tab\",\"data-bs-toggle\":\"tab\",\"data-bs-target\":\"#style\",type:\"button\",role:\"tab\",\"aria-controls\":\"style\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-paint-brush\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link\",id:\"trait-tab\",\"data-bs-toggle\":\"tab\",\"data-bs-target\":\"#trait\",type:\"button\",role:\"tab\",\"aria-controls\":\"trait\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-cog\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link\",id:\"trait-tab\",\"data-bs-toggle\":\"tab\",\"data-bs-target\":\"#trait\",type:\"button\",role:\"tab\",\"aria-controls\":\"trait\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-cog\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",id:\"block\",role:\"tabpanel\",\"aria-labelledby\":\"block-tab\",children:/*#__PURE__*/_jsx(\"div\",{id:\"blocks\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade\",id:\"layer\",role:\"tabpanel\",\"aria-labelledby\":\"layer-tab\",children:/*#__PURE__*/_jsx(\"div\",{id:\"layers-container\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade\",id:\"style\",role:\"tabpanel\",\"aria-labelledby\":\"style-tab\",children:/*#__PURE__*/_jsx(\"div\",{id:\"styles-container\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade\",id:\"trait\",role:\"tabpanel\",\"aria-labelledby\":\"trait-tab\",children:/*#__PURE__*/_jsx(\"div\",{id:\"trait-container\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel__devices\"}),/*#__PURE__*/_jsx(\"div\",{className:\"panel__basic-actions\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"editor\"})]})]});};export default Page;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Editor/index.js"],"names":["React","useState","useEffect","grapesjs","gjsBlockBasic","Link","useParams","API_HOST","get_page","axios","Page","editor","seteditor","dataa","setDataa","pageId","console","log","loadd","data","init","container","blockManager","appendTo","styleManager","sectors","name","open","buildProps","properties","type","property","units","defaults","min","layerManager","traitManager","selectorManager","panels","id","el","buttons","active","className","label","command","togglable","deviceManager","devices","width","widthMedia","assetManager","embedAsBase64","storageManager","stepsBeforeSave","contentTypeJson","storeComponents","storeStyles","storeHtml","storeCss","headers","urlStore","urlLoad","plugins","plugins0pts","Commands","add","run","setDevice","a","Canvas","getDocument","getHtml","getCss","store","win","window","focus"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport grapesjs from \"grapesjs\";\r\nimport gjsBlockBasic from \"grapesjs-blocks-basic\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport \"./grapes.scss\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { API_HOST, get_page } from \"../../api_utils\";\r\nimport axios from \"axios\";\r\n\r\nconst Page = () => {\r\n  const [editor, seteditor] = useState(null);\r\n  const [dataa, setDataa] = useState([]);\r\n  const { pageId } = useParams();\r\n  console.log(\"pageId :>>\", pageId);\r\n  const loadd = async () => {\r\n    const data = await get_page(pageId);\r\n    setDataa([...dataa, data]);\r\n    console.log(dataa);\r\n  };\r\n  useEffect(() => {\r\n    const editor = grapesjs.init({\r\n      container: \"#editor\",\r\n      blockManager: {\r\n        appendTo: \"#blocks\",\r\n      },\r\n      styleManager: {\r\n        appendTo: \"#styles-container\",\r\n        sectors: [\r\n          {\r\n            name: \"Dimension\",\r\n            open: false,\r\n            buildProps: [\"width\", \"min-height\", \"padding\"],\r\n            properties: [\r\n              {\r\n                type: \"integer\",\r\n                name: \"The width\",\r\n                property: \"width\",\r\n                units: [\"px\", \"%\"],\r\n                defaults: \"auto\",\r\n                min: 0,\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            name: \"Extra\",\r\n            buildProps: [\"background-color\", \"box-shadow\"],\r\n          },\r\n        ],\r\n      },\r\n      layerManager: {\r\n        appendTo: \"#layers-container\",\r\n      },\r\n      traitManager: {\r\n        appendTo: \"#trait-container\",\r\n      },\r\n      selectorManager: {\r\n        appendTo: \"#styles-container\",\r\n      },\r\n      panels: {\r\n        defaults: [\r\n          {\r\n            id: \"basic-actions\",\r\n            el: \".panel__basic-actions\",\r\n            buttons: [\r\n              {\r\n                id: \"visibility\",\r\n                active: true, // active by default\r\n\r\n                className: \"btn-toggle-borders\",\r\n                label: '<i class=\"fa fa-clone\"></i>',\r\n                command: \"sw-visibility\", // Built-in command\r\n              },\r\n              {\r\n                id: \"preview\",\r\n                togglable: false,\r\n                className: \"btn-toggle-borders\",\r\n                label: '<i class=\"fa fa-eye\"></i>',\r\n                command: \"cmd-preview\", // Built-in command\r\n              },\r\n              {\r\n                id: \"command\",\r\n                togglable: false,\r\n                className: \"btn-toggle-borders\",\r\n                label: '<i class=\"fa fa-code\"></i>',\r\n                command: \"show-document-log\", // Built-in command\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            id: \"panel-devices\",\r\n            el: \".panel__devices\",\r\n            buttons: [\r\n              {\r\n                id: \"device-desktop\",\r\n                label: '<i class=\"fa fa-television\"></i>',\r\n                command: \"set-device-desktop\",\r\n                active: true,\r\n                togglable: false,\r\n              },\r\n\r\n              {\r\n                id: \"device-mobile\",\r\n                label: '<i class=\"fa fa-mobile\"></i>',\r\n                command: \"set-device-mobile\",\r\n                togglable: false,\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n      deviceManager: {\r\n        devices: [\r\n          {\r\n            name: \"Desktop\",\r\n            width: \"\",\r\n          },\r\n          {\r\n            name: \"Mobile\",\r\n            width: \"320px\",\r\n            widthMedia: \"480px\",\r\n          },\r\n        ],\r\n      },\r\n      assetManager: {\r\n        embedAsBase64: false,\r\n      },\r\n      storageManager: {\r\n        type: \"remote\",\r\n        stepsBeforeSave: 3,\r\n        contentTypeJson: true,\r\n        storeComponents: true,\r\n        storeStyles: true,\r\n        storeHtml: true,\r\n        storeCss: true,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        id: pageId,\r\n        urlStore: `${API_HOST}/edit/${pageId}/content`,\r\n        urlLoad: `${API_HOST}/edit/${pageId}/content`,\r\n      },\r\n      // storageManager: {\r\n      //   id: pageId, // Prefix identifier that will be used on parameters\r\n      //   type: \"local\", // Type of the storage\r\n      //   autosave: true, // Store data automatically\r\n      //   autoload: true, // Autoload stored data on init\r\n      //   stepsBeforeSave: 1, // If autosave enabled, indicates how many changes are necessary before store method is triggered\r\n      // },\r\n      plugins: [gjsBlockBasic],\r\n      plugins0pts: {\r\n        gjsBlockBasic: {},\r\n      },\r\n    });\r\n    // Commands\r\n    editor.Commands.add(\"set-device-desktop\", {\r\n      run: (editor) => editor.setDevice(\"Desktop\"),\r\n    });\r\n    editor.Commands.add(\"set-device-mobile\", {\r\n      run: (editor) => editor.setDevice(\"Mobile\"),\r\n    });\r\n\r\n    editor.Commands.add(\"show-document-log\", {\r\n      run: (editor) => {\r\n        let a = editor.Canvas;\r\n\r\n        loadd();\r\n        console.log(editor.Canvas.getDocument());\r\n        console.log(editor.getHtml());\r\n        console.log(editor.getCss());\r\n      },\r\n    });\r\n    editor.Commands.add(\"cmd-preview\", {\r\n      run: (editor) => {\r\n        editor.store();\r\n        const win = window.open(`/page/${pageId}`, \"_blank\");\r\n        win.focus();\r\n      },\r\n    });\r\n    seteditor(editor);\r\n  }, []);\r\n  return (\r\n    <div className=\"Containerr\">\r\n      <div id=\"navbar\" className=\"sidenav d-flex flex-column overflow-scroll\">\r\n        <nav className=\"navbar navbar-light\">\r\n          <div className=\"container-fluid\">\r\n            <span className=\"navbar-brand mb-0 h3 logo\">Editor</span>\r\n          </div>\r\n        </nav>\r\n\r\n        <div className=\"\">\r\n          <ul className=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">\r\n            <li className=\"nav-item\" role=\"presentation\">\r\n              <button\r\n                className=\"nav-link active\"\r\n                id=\"block-tab\"\r\n                data-bs-toggle=\"tab\"\r\n                data-bs-target=\"#block\"\r\n                type=\"button\"\r\n                role=\"tab\"\r\n                aria-controls=\"block\"\r\n                aria-selected=\"true\"\r\n              >\r\n                <i className=\"fa fa-cubes\"></i>\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\" role=\"presentation\">\r\n              <button\r\n                className=\"nav-link\"\r\n                id=\"layer-tab\"\r\n                data-bs-toggle=\"tab\"\r\n                data-bs-target=\"#layer\"\r\n                type=\"button\"\r\n                role=\"tab\"\r\n                aria-controls=\"layer\"\r\n                aria-selected=\"false\"\r\n              >\r\n                <i className=\"fa fa-tasks\"></i>\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\" role=\"presentation\">\r\n              <button\r\n                className=\"nav-link\"\r\n                id=\"style-tab\"\r\n                data-bs-toggle=\"tab\"\r\n                data-bs-target=\"#style\"\r\n                type=\"button\"\r\n                role=\"tab\"\r\n                aria-controls=\"style\"\r\n                aria-selected=\"false\"\r\n              >\r\n                <i className=\"fa fa-paint-brush\"></i>\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\" role=\"presentation\">\r\n              <button\r\n                className=\"nav-link\"\r\n                id=\"trait-tab\"\r\n                data-bs-toggle=\"tab\"\r\n                data-bs-target=\"#trait\"\r\n                type=\"button\"\r\n                role=\"tab\"\r\n                aria-controls=\"trait\"\r\n                aria-selected=\"false\"\r\n              >\r\n                <i className=\"fa fa-cog\"></i>\r\n              </button>\r\n            </li>\r\n            <li className=\"nav-item\" role=\"presentation\">\r\n              <button\r\n                className=\"nav-link\"\r\n                id=\"trait-tab\"\r\n                data-bs-toggle=\"tab\"\r\n                data-bs-target=\"#trait\"\r\n                type=\"button\"\r\n                role=\"tab\"\r\n                aria-controls=\"trait\"\r\n                aria-selected=\"false\"\r\n              >\r\n                <i className=\"far fa-cog\"></i>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n          <div className=\"tab-content\">\r\n            <div\r\n              className=\"tab-pane fade show active\"\r\n              id=\"block\"\r\n              role=\"tabpanel\"\r\n              aria-labelledby=\"block-tab\"\r\n            >\r\n              <div id=\"blocks\"></div>\r\n            </div>\r\n            <div\r\n              className=\"tab-pane fade\"\r\n              id=\"layer\"\r\n              role=\"tabpanel\"\r\n              aria-labelledby=\"layer-tab\"\r\n            >\r\n              <div id=\"layers-container\"></div>\r\n            </div>\r\n            <div\r\n              className=\"tab-pane fade\"\r\n              id=\"style\"\r\n              role=\"tabpanel\"\r\n              aria-labelledby=\"style-tab\"\r\n            >\r\n              <div id=\"styles-container\"></div>\r\n            </div>\r\n            <div\r\n              className=\"tab-pane fade\"\r\n              id=\"trait\"\r\n              role=\"tabpanel\"\r\n              aria-labelledby=\"trait-tab\"\r\n            >\r\n              <div id=\"trait-container\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"main-content\">\r\n        <nav className=\"navbar navbar-light\">\r\n          <div className=\"container-fluid\">\r\n            <div className=\"panel__devices\"></div>\r\n            <div className=\"panel__basic-actions\"></div>\r\n          </div>\r\n        </nav>\r\n        <div id=\"editor\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"]},"metadata":{},"sourceType":"module"}