{"ast":null,"code":"var _jsxFileName = \"/home/empawebadmin/empaweb/frontend/src/containers/newsEditor/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport grapesjs from \"grapesjs\";\nimport gjsPresetWebpage from \"grapesjs-preset-webpage\";\nimport \"grapesjs/dist/css/grapes.min.css\";\nimport \"./grapes.scss\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport { API_HOST, assest_upload } from \"../../api_utils\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Page = () => {\n  _s();\n\n  const location = useLocation();\n  const props = location.state;\n  const [editor, seteditor] = useState(null);\n  const [asset, setAsset] = useState([]);\n  const [jdata, setJdata] = useState([]);\n  const [data, setData] = useState([]);\n  const {\n    pageId\n  } = useParams(); // useEffect(() => {\n  //   const editor = grapesjs.init({\n  //     container: \"#editor\",\n  //     assetManager: {\n  //       assets: [\n  //         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\n  //         // Pass an object with your properties\n  //         {\n  //           type: \"image\",\n  //           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\n  //           height: 350,\n  //           width: 250,\n  //           name: \"displayName\",\n  //         },\n  //         {\n  //           // As the 'image' is the base type of assets, omitting it will\n  //           // be set as `image` by default\n  //           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\n  //           height: 350,\n  //           width: 250,\n  //           name: \"displayName\",\n  //         },\n  //       ],\n  //     },\n  //   });\n  //   seteditor({ ...editor, editor });\n  // }, [data]);\n\n  useEffect(() => {\n    const editor = grapesjs.init({\n      container: \"#editor\",\n      storageManager: {\n        type: \"remote\",\n        stepsBeforeSave: 1,\n        contentTypeJson: true,\n        storeComponents: true,\n        storeStyles: true,\n        storeHtml: true,\n        storeCss: true,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        id: pageId,\n        urlStore: `${API_HOST}/newsEdit/${pageId}/content`,\n        urlLoad: `${API_HOST}/newsEdit/${pageId}/content`\n      },\n      assetManager: {\n        // Default assets\n        // Style prefix\n        stylePrefix: \"am-\",\n        assets: data,\n        // Url where uploads will be send, set false to disable upload\n        // upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\n        // Text on upload input\n        uploadText: \"Drop files here or click to sadsd\",\n        // Label for the add button\n        addBtnText: \"Add image\",\n        // Custom uploadFile function\n        // @example\n        uploadFile: function (e) {\n          var files = e.dataTransfer ? e.dataTransfer.files : e.target.files; // ...send somewhere\n\n          console.log(files);\n          var formData = new FormData();\n\n          for (var i in files) {\n            formData.append(\"file\", files[i]);\n            formData.append(\"title\", props.page.title);\n          }\n\n          axios.post(`${API_HOST}/news/${pageId}`, formData).then(response => {\n            setData(response.data);\n          }).catch(error => {\n            console.log(\"Eeee\", error.message);\n          });\n        } //  uploadFile: '',\n\n      },\n      plugins: [gjsPresetWebpage],\n      plugins0pts: {\n        gjsPresetWebpage: {}\n      }\n    });\n    seteditor(editor);\n    editor.addComponents(``);\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"editor\",\n      children: console.log(data)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Page, \"QNJGKA/p3WiBv2I22j2+hzvSsg8=\", false, function () {\n  return [useLocation, useParams];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/newsEditor/index.js"],"names":["React","useState","useEffect","grapesjs","gjsPresetWebpage","useParams","useLocation","API_HOST","assest_upload","axios","Page","location","props","state","editor","seteditor","asset","setAsset","jdata","setJdata","data","setData","pageId","init","container","storageManager","type","stepsBeforeSave","contentTypeJson","storeComponents","storeStyles","storeHtml","storeCss","headers","id","urlStore","urlLoad","assetManager","stylePrefix","assets","uploadText","addBtnText","uploadFile","e","files","dataTransfer","target","console","log","formData","FormData","i","append","page","title","post","then","response","catch","error","message","plugins","plugins0pts","addComponents"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport grapesjs from \"grapesjs\";\r\nimport gjsPresetWebpage from \"grapesjs-preset-webpage\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport \"./grapes.scss\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport { API_HOST, assest_upload } from \"../../api_utils\";\r\nimport axios from \"axios\";\r\nconst Page = () => {\r\n  const location = useLocation();\r\n  const props = location.state;\r\n  const [editor, seteditor] = useState(null);\r\n  const [asset, setAsset] = useState([]);\r\n  const [jdata, setJdata] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const { pageId } = useParams();\r\n  // useEffect(() => {\r\n  //   const editor = grapesjs.init({\r\n  //     container: \"#editor\",\r\n  //     assetManager: {\r\n  //       assets: [\r\n  //         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\r\n  //         // Pass an object with your properties\r\n  //         {\r\n  //           type: \"image\",\r\n  //           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //         {\r\n  //           // As the 'image' is the base type of assets, omitting it will\r\n  //           // be set as `image` by default\r\n  //           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //       ],\r\n  //     },\r\n  //   });\r\n  //   seteditor({ ...editor, editor });\r\n  // }, [data]);\r\n  useEffect(() => {\r\n    const editor = grapesjs.init({\r\n      container: \"#editor\",\r\n\r\n      storageManager: {\r\n        type: \"remote\",\r\n        stepsBeforeSave: 1,\r\n        contentTypeJson: true,\r\n        storeComponents: true,\r\n        storeStyles: true,\r\n        storeHtml: true,\r\n        storeCss: true,\r\n\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        id: pageId,\r\n        urlStore: `${API_HOST}/newsEdit/${pageId}/content`,\r\n        urlLoad: `${API_HOST}/newsEdit/${pageId}/content`,\r\n      },\r\n      assetManager: {\r\n        // Default assets\r\n\r\n        // Style prefix\r\n        stylePrefix: \"am-\",\r\n        assets: data,\r\n        // Url where uploads will be send, set false to disable upload\r\n        // upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\r\n\r\n        // Text on upload input\r\n        uploadText: \"Drop files here or click to sadsd\",\r\n\r\n        // Label for the add button\r\n        addBtnText: \"Add image\",\r\n\r\n        // Custom uploadFile function\r\n        // @example\r\n        uploadFile: function (e) {\r\n          var files = e.dataTransfer ? e.dataTransfer.files : e.target.files;\r\n          // ...send somewhere\r\n          console.log(files);\r\n\r\n          var formData = new FormData();\r\n\r\n          for (var i in files) {\r\n            formData.append(\"file\", files[i]);\r\n            formData.append(\"title\", props.page.title);\r\n          }\r\n\r\n          axios\r\n            .post(`${API_HOST}/news/${pageId}`, formData)\r\n            .then((response) => {\r\n              setData(response.data);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Eeee\", error.message);\r\n            });\r\n        },\r\n\r\n        //  uploadFile: '',\r\n      },\r\n      plugins: [gjsPresetWebpage],\r\n      plugins0pts: {\r\n        gjsPresetWebpage: {},\r\n      },\r\n    });\r\n    seteditor(editor);\r\n    editor.addComponents(``);\r\n  }, [data]);\r\n  return (\r\n    <div className=\"Container\">\r\n      <div id=\"editor\">{console.log(data)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"]},"metadata":{},"sourceType":"module"}