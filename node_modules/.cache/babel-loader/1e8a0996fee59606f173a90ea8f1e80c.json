{"ast":null,"code":"import _objectSpread from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import style from\"./style.module.scss\";import{API_HOST,create_training,delete_training,update_training}from\"../../api_utils\";import{Form,Col,Row,InputGroup,Alert}from\"react-bootstrap\";import{Link,useHistory}from\"react-router-dom\";import axios from\"axios\";import{UserContext}from\"../../UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Modal=function Modal(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),validated=_useState2[0],setValidated=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loginError=_useState4[0],setLoginError=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var history=useHistory();var hey=useContext(UserContext);useEffect(function(){},[]);var handle=function handle(e){var newbody=_objectSpread({},data);newbody[e.target.id]=e.target.value;setData(newbody);};var submit=function submit(e){var form=e.currentTarget;if(form.checkValidity()===false){e.preventDefault();e.stopPropagation();}setValidated(true);e.preventDefault();if(form.checkValidity()===true){axios.post(\"\".concat(API_HOST,\"/account/login\"),data).then(function(res){var data={islogin:true};localStorage.setItem(\"token\",res.data.token);setLoginError(false);props.setLogin(data);history.push(\"/\");}).catch(function(error){console.log(error);setLoginError(true);});}};var handleSubmit=function handleSubmit(event){var form=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();event.stopPropagation();}setValidated(true);};return/*#__PURE__*/_jsx(\"div\",{className:style.modalBackground,children:/*#__PURE__*/_jsxs(\"div\",{className:style.modalContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:style.titleCloseBtn,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){history.push(\"/\");},children:\"\\u0425\"})}),/*#__PURE__*/_jsx(\"div\",{className:style.title,children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041D\\u044D\\u0432\\u0442\\u0440\\u044D\\u0445 \"})}),/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:submit,children:[/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Group,{as:Col,md:\"0\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Username\",defaultValue:data.title,onChange:function onChange(e){return handle(e);},id:\"username\"})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Group,{as:Col,md:\"0\",children:/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"Password\",placeholder:\"Password\",defaultValue:data.price,onChange:function onChange(e){return handle(e);},id:\"password\"})})}),/*#__PURE__*/_jsx(\"div\",{className:style.footer,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0417\\u04E9\\u0432\\u0448\\u04E9\\u04E9\\u0440\\u04E9\\u0445\"})}),loginError?/*#__PURE__*/_jsxs(Alert,{bsStyle:\"warning\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0410\\u043B\\u0434\\u0430\\u0430!\"}),\" \\u041D\\u044D\\u0432\\u0440\\u0442\\u044D\\u0445 \\u043D\\u044D\\u0440 \\u0431\\u043E\\u043B\\u043E\\u043D \\u043D\\u0443\\u0443\\u0446 \\u04AF\\u0433\\u044D\\u044D \\u0448\\u0430\\u043B\\u0433\\u0430\\u043D\\u0430 \\u0443\\u0443.\"]}):\"\",\";\"]})]})});};export default Modal;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Login/index.js"],"names":["React","useContext","useEffect","useState","style","API_HOST","create_training","delete_training","update_training","Form","Col","Row","InputGroup","Alert","Link","useHistory","axios","UserContext","Modal","props","validated","setValidated","loginError","setLoginError","data","setData","history","hey","handle","e","newbody","target","id","value","submit","form","currentTarget","checkValidity","preventDefault","stopPropagation","post","then","res","islogin","localStorage","setItem","token","setLogin","push","catch","error","console","log","handleSubmit","event","modalBackground","modalContainer","titleCloseBtn","title","price","footer"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport style from \"./style.module.scss\";\r\nimport {\r\n  API_HOST,\r\n  create_training,\r\n  delete_training,\r\n  update_training,\r\n} from \"../../api_utils\";\r\n\r\nimport { Form, Col, Row, InputGroup, Alert } from \"react-bootstrap\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../../UserContext\";\r\nconst Modal = (props) => {\r\n  const [validated, setValidated] = useState(false);\r\n  const [loginError, setLoginError] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const history = useHistory();\r\n\r\n  const hey = useContext(UserContext);\r\n  useEffect(() => {}, []);\r\n\r\n  const handle = (e) => {\r\n    const newbody = { ...data };\r\n\r\n    newbody[e.target.id] = e.target.value;\r\n    setData(newbody);\r\n  };\r\n  const submit = (e) => {\r\n    const form = e.currentTarget;\r\n    if (form.checkValidity() === false) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n\r\n    setValidated(true);\r\n    e.preventDefault();\r\n    if (form.checkValidity() === true) {\r\n      axios\r\n        .post(`${API_HOST}/account/login`, data)\r\n        .then((res) => {\r\n          const data = { islogin: true };\r\n          localStorage.setItem(\"token\", res.data.token);\r\n          setLoginError(false);\r\n          props.setLogin(data);\r\n          history.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setLoginError(true);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    const form = event.currentTarget;\r\n    if (form.checkValidity() === false) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    setValidated(true);\r\n  };\r\n  return (\r\n    <div className={style.modalBackground}>\r\n      <div className={style.modalContainer}>\r\n        <div className={style.titleCloseBtn}>\r\n          <button\r\n            onClick={(e) => {\r\n              history.push(\"/\");\r\n            }}\r\n          >\r\n            Х\r\n          </button>\r\n        </div>\r\n        <div className={style.title}>\r\n          <h1>Нэвтрэх </h1>\r\n        </div>\r\n        <Form noValidate validated={validated} onSubmit={submit}>\r\n          <Row className=\"mb-3\">\r\n            <Form.Group as={Col} md=\"0\">\r\n              <Form.Control\r\n                required\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                defaultValue={data.title}\r\n                onChange={(e) => handle(e)}\r\n                id=\"username\"\r\n              />\r\n            </Form.Group>\r\n          </Row>\r\n          <Row className=\"mb-3\">\r\n            <Form.Group as={Col} md=\"0\">\r\n              <Form.Control\r\n                required\r\n                type=\"Password\"\r\n                placeholder=\"Password\"\r\n                defaultValue={data.price}\r\n                onChange={(e) => handle(e)}\r\n                id=\"password\"\r\n              />\r\n            </Form.Group>\r\n          </Row>\r\n          <div className={style.footer}>\r\n            <button type=\"submit\">Зөвшөөрөх</button>\r\n          </div>\r\n          {loginError ? (\r\n            <Alert bsStyle=\"warning\">\r\n              <strong>Алдаа!</strong> Нэвртэх нэр болон нууц үгээ шалгана уу.\r\n            </Alert>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          ;\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n"]},"metadata":{},"sourceType":"module"}