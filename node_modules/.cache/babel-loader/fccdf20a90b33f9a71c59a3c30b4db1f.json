{"ast":null,"code":"import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import grapesjs from\"grapesjs\";import gjsPresetWebpage from\"grapesjs-preset-newsletter\";import\"grapesjs/dist/css/grapes.min.css\";import\"./grapes.scss\";import{useParams,useLocation}from\"react-router-dom\";import{API_HOST,assest_upload}from\"../../api_utils\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Page=function Page(){var location=useLocation();var props=location.state;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editor=_useState2[0],seteditor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),asset=_useState4[0],setAsset=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),jdata=_useState6[0],setJdata=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useParams=useParams(),pageId=_useParams.pageId;// useEffect(() => {\n//   const editor = grapesjs.init({\n//     container: \"#editor\",\n//     assetManager: {\n//       assets: [\n//         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\n//         // Pass an object with your properties\n//         {\n//           type: \"image\",\n//           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\n//           height: 350,\n//           width: 250,\n//           name: \"displayName\",\n//         },\n//         {\n//           // As the 'image' is the base type of assets, omitting it will\n//           // be set as `image` by default\n//           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\n//           height: 350,\n//           width: 250,\n//           name: \"displayName\",\n//         },\n//       ],\n//     },\n//   });\n//   seteditor({ ...editor, editor });\n// }, [data]);\nuseEffect(function(){var editor=grapesjs.init({container:\"#editor\",storageManager:{type:\"remote\",stepsBeforeSave:1,contentTypeJson:true,storeComponents:true,storeStyles:true,storeHtml:true,storeCss:true,headers:{\"Content-Type\":\"application/json\"},id:pageId,urlStore:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\"),urlLoad:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\"),params:{token:localStorage.getItem(\"token\")}},assetManager:{// Default assets\n// Style prefix\nstylePrefix:\"am-\",assets:data,// Url where uploads will be send, set false to disable upload\n// upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\n// Text on upload input\nuploadText:\"Drop files here or click to sadsd\",// Label for the add button\naddBtnText:\"Add image\",// Custom uploadFile function\n// @example\nuploadFile:function uploadFile(e){var files=e.dataTransfer?e.dataTransfer.files:e.target.files;// ...send somewhere\nconsole.log(files);var formData=new FormData();for(var i in files){formData.append(\"file\",files[i]);formData.append(\"title\",props.page.title);formData.append(\"token\",localStorage.getItem(\"token\"));}axios.post(\"\".concat(API_HOST,\"/asset/\").concat(pageId),formData).then(function(response){setData(response.data);}).catch(function(error){console.log(\"Eeee\",error.message);});}//  uploadFile: '',\n},plugins:[gjsPresetWebpage],plugins0pts:{gjsPresetWebpage:{}}});seteditor(editor);editor.addComponents(\"\");},[data]);return/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsx(\"div\",{id:\"editor\",children:console.log(data)})});};export default Page;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Editor/index.js"],"names":["React","useState","useEffect","grapesjs","gjsPresetWebpage","useParams","useLocation","API_HOST","assest_upload","axios","Page","location","props","state","editor","seteditor","asset","setAsset","jdata","setJdata","data","setData","pageId","init","container","storageManager","type","stepsBeforeSave","contentTypeJson","storeComponents","storeStyles","storeHtml","storeCss","headers","id","urlStore","urlLoad","params","token","localStorage","getItem","assetManager","stylePrefix","assets","uploadText","addBtnText","uploadFile","e","files","dataTransfer","target","console","log","formData","FormData","i","append","page","title","post","then","response","catch","error","message","plugins","plugins0pts","addComponents"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport grapesjs from \"grapesjs\";\r\nimport gjsPresetWebpage from \"grapesjs-preset-newsletter\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport \"./grapes.scss\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport { API_HOST, assest_upload } from \"../../api_utils\";\r\nimport axios from \"axios\";\r\nconst Page = () => {\r\n  const location = useLocation();\r\n  const props = location.state;\r\n  const [editor, seteditor] = useState(null);\r\n  const [asset, setAsset] = useState([]);\r\n  const [jdata, setJdata] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const { pageId } = useParams();\r\n  // useEffect(() => {\r\n  //   const editor = grapesjs.init({\r\n  //     container: \"#editor\",\r\n  //     assetManager: {\r\n  //       assets: [\r\n  //         \"http://placehold.it/350x250/78c5d6/fff/image1.jpg\",\r\n  //         // Pass an object with your properties\r\n  //         {\r\n  //           type: \"image\",\r\n  //           src: \"http://placehold.it/350x250/459ba8/fff/image2.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //         {\r\n  //           // As the 'image' is the base type of assets, omitting it will\r\n  //           // be set as `image` by default\r\n  //           src: \"http://placehold.it/350x250/79c267/fff/image3.jpg\",\r\n  //           height: 350,\r\n  //           width: 250,\r\n  //           name: \"displayName\",\r\n  //         },\r\n  //       ],\r\n  //     },\r\n  //   });\r\n  //   seteditor({ ...editor, editor });\r\n  // }, [data]);\r\n  useEffect(() => {\r\n    const editor = grapesjs.init({\r\n      container: \"#editor\",\r\n\r\n      storageManager: {\r\n        type: \"remote\",\r\n        stepsBeforeSave: 1,\r\n        contentTypeJson: true,\r\n        storeComponents: true,\r\n        storeStyles: true,\r\n        storeHtml: true,\r\n        storeCss: true,\r\n\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        id: pageId,\r\n        urlStore: `${API_HOST}/edit/${pageId}/content`,\r\n        urlLoad: `${API_HOST}/edit/${pageId}/content`,\r\n        params: { token: localStorage.getItem(\"token\") },\r\n      },\r\n      assetManager: {\r\n        // Default assets\r\n\r\n        // Style prefix\r\n        stylePrefix: \"am-\",\r\n        assets: data,\r\n        // Url where uploads will be send, set false to disable upload\r\n        // upload: \"http://localhost/grapeJs/src/file_uploader/fileUpload.php\",\r\n\r\n        // Text on upload input\r\n        uploadText: \"Drop files here or click to sadsd\",\r\n\r\n        // Label for the add button\r\n        addBtnText: \"Add image\",\r\n\r\n        // Custom uploadFile function\r\n        // @example\r\n        uploadFile: function (e) {\r\n          var files = e.dataTransfer ? e.dataTransfer.files : e.target.files;\r\n          // ...send somewhere\r\n          console.log(files);\r\n\r\n          var formData = new FormData();\r\n\r\n          for (var i in files) {\r\n            formData.append(\"file\", files[i]);\r\n            formData.append(\"title\", props.page.title);\r\n            formData.append(\"token\", localStorage.getItem(\"token\"));\r\n          }\r\n\r\n          axios\r\n            .post(`${API_HOST}/asset/${pageId}`, formData)\r\n            .then((response) => {\r\n              setData(response.data);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Eeee\", error.message);\r\n            });\r\n        },\r\n\r\n        //  uploadFile: '',\r\n      },\r\n      plugins: [gjsPresetWebpage],\r\n      plugins0pts: {\r\n        gjsPresetWebpage: {},\r\n      },\r\n    });\r\n    seteditor(editor);\r\n    editor.addComponents(``);\r\n  }, [data]);\r\n  return (\r\n    <div className=\"Container\">\r\n      <div id=\"editor\">{console.log(data)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"]},"metadata":{},"sourceType":"module"}