{"ast":null,"code":"import _regeneratorRuntime from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/empawebadmin/empaweb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import grapesjs from\"grapesjs\";import gjsPresetWebpage from\"grapesjs-preset-webpage\";import\"grapesjs/dist/css/grapes.min.css\";import\"./grapes.scss\";import{useParams}from\"react-router-dom\";import{API_HOST}from\"../../api_utils\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Page=function Page(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editor=_useState2[0],seteditor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),asset=_useState4[0],setAsset=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),jdata=_useState6[0],setJdata=_useState6[1];var _useParams=useParams(),pageId=_useParams.pageId;useEffect(function(){function getAllPages(){return _getAllPages.apply(this,arguments);}function _getAllPages(){_getAllPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/assest\");case 3:response=_context.sent;// const json = await axios.get(`${API_HOST}/edit/${pageId}/content`);\n// console.log(json.data);\nsetAsset(response.data);// setJdata(json.data);\n_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(\"error :>>\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getAllPages.apply(this,arguments);}getAllPages();},[]);useEffect(function(){var editor=grapesjs.init({container:\"#editor\",storageManager:{type:\"remote\",stepsBeforeSave:3,contentTypeJson:true,storeComponents:true,storeStyles:true,storeHtml:true,storeCss:true,headers:{\"Content-Type\":\"application/json\"},id:pageId,urlStore:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\"),urlLoad:\"\".concat(API_HOST,\"/edit/\").concat(pageId,\"/content\")},plugins:[gjsPresetWebpage],plugins0pts:{gjsPresetWebpage:{}}});seteditor(editor);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsx(\"div\",{id:\"editor\"})});};export default Page;","map":{"version":3,"sources":["/home/empawebadmin/empaweb/frontend/src/containers/Editor/index.js"],"names":["React","useState","useEffect","grapesjs","gjsPresetWebpage","useParams","API_HOST","axios","Page","editor","seteditor","asset","setAsset","jdata","setJdata","pageId","getAllPages","get","response","data","console","log","init","container","storageManager","type","stepsBeforeSave","contentTypeJson","storeComponents","storeStyles","storeHtml","storeCss","headers","id","urlStore","urlLoad","plugins","plugins0pts"],"mappings":"2cAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yBAA7B,CACA,MAAO,kCAAP,CACA,MAAO,eAAP,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CACA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,cAA4BP,QAAQ,CAAC,IAAD,CAApC,wCAAOQ,MAAP,eAAeC,SAAf,eACA,eAA0BT,QAAQ,CAAC,EAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eACA,eAA0BX,QAAQ,CAAC,EAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eACA,eAAmBT,SAAS,EAA5B,CAAQU,MAAR,YAAQA,MAAR,CACAb,SAAS,CAAC,UAAM,SACCc,CAAAA,WADD,2IACd,sLAE2BT,CAAAA,KAAK,CAACU,GAAN,gCAF3B,QAEUC,QAFV,eAGI;AACA;AACAN,QAAQ,CAACM,QAAQ,CAACC,IAAV,CAAR,CACA;AANJ,+EAQIC,OAAO,CAACC,GAAR,CAAY,WAAZ,cARJ,oEADc,8CAYdL,WAAW,GACZ,CAbQ,CAaN,EAbM,CAAT,CAcAd,SAAS,CAAC,UAAM,CACd,GAAMO,CAAAA,MAAM,CAAGN,QAAQ,CAACmB,IAAT,CAAc,CAC3BC,SAAS,CAAE,SADgB,CAG3BC,cAAc,CAAE,CACdC,IAAI,CAAE,QADQ,CAEdC,eAAe,CAAE,CAFH,CAGdC,eAAe,CAAE,IAHH,CAIdC,eAAe,CAAE,IAJH,CAKdC,WAAW,CAAE,IALC,CAMdC,SAAS,CAAE,IANG,CAOdC,QAAQ,CAAE,IAPI,CASdC,OAAO,CAAE,CACP,eAAgB,kBADT,CATK,CAYdC,EAAE,CAAElB,MAZU,CAadmB,QAAQ,WAAK5B,QAAL,kBAAsBS,MAAtB,YAbM,CAcdoB,OAAO,WAAK7B,QAAL,kBAAsBS,MAAtB,YAdO,CAHW,CAoB3BqB,OAAO,CAAE,CAAChC,gBAAD,CApBkB,CAqB3BiC,WAAW,CAAE,CACXjC,gBAAgB,CAAE,EADP,CArBc,CAAd,CAAf,CAyBAM,SAAS,CAACD,MAAD,CAAT,CACD,CA3BQ,CA2BN,EA3BM,CAAT,CA4BA,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,EAAE,CAAC,QAAR,EADF,EADF,CAKD,CApDD,CAsDA,cAAeD,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport grapesjs from \"grapesjs\";\r\nimport gjsPresetWebpage from \"grapesjs-preset-webpage\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport \"./grapes.scss\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { API_HOST } from \"../../api_utils\";\r\nimport axios from \"axios\";\r\nconst Page = () => {\r\n  const [editor, seteditor] = useState(null);\r\n  const [asset, setAsset] = useState([]);\r\n  const [jdata, setJdata] = useState([]);\r\n  const { pageId } = useParams();\r\n  useEffect(() => {\r\n    async function getAllPages() {\r\n      try {\r\n        const response = await axios.get(`http://localhost:5000/assest`);\r\n        // const json = await axios.get(`${API_HOST}/edit/${pageId}/content`);\r\n        // console.log(json.data);\r\n        setAsset(response.data);\r\n        // setJdata(json.data);\r\n      } catch (error) {\r\n        console.log(\"error :>>\", error);\r\n      }\r\n    }\r\n    getAllPages();\r\n  }, []);\r\n  useEffect(() => {\r\n    const editor = grapesjs.init({\r\n      container: \"#editor\",\r\n\r\n      storageManager: {\r\n        type: \"remote\",\r\n        stepsBeforeSave: 3,\r\n        contentTypeJson: true,\r\n        storeComponents: true,\r\n        storeStyles: true,\r\n        storeHtml: true,\r\n        storeCss: true,\r\n\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        id: pageId,\r\n        urlStore: `${API_HOST}/edit/${pageId}/content`,\r\n        urlLoad: `${API_HOST}/edit/${pageId}/content`,\r\n      },\r\n\r\n      plugins: [gjsPresetWebpage],\r\n      plugins0pts: {\r\n        gjsPresetWebpage: {},\r\n      },\r\n    });\r\n    seteditor(editor);\r\n  }, []);\r\n  return (\r\n    <div className=\"Container\">\r\n      <div id=\"editor\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"]},"metadata":{},"sourceType":"module"}